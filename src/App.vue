<script setup lang="ts">
import { RouterView } from 'vue-router'
import { Toaster } from 'vue-sonner'
import { useTheme } from '@/composables/useTheme'

const { theme } = useTheme()
</script>

<template>
  <RouterView />
  
  <Toaster 
    position="top-center" 
    :theme="theme" 
    richColors 
    closeButton
    class="!z-[99999]"
    :toastOptions="{
      class: 'my-toast-card !bg-white dark:!bg-gray-800 !bg-opacity-100 !opacity-100 !rounded-2xl !border-0 !shadow-2xl !py-5 !px-8 !text-base !font-medium !min-w-[300px] !justify-center',
      duration: 2000
    }"
  />
</template>

<style>
/* ğŸ¯ å¼ºåˆ¶å±å¹•æ­£ä¸­å¤®å®šä½è¡¥ä¸ 
   è¦†ç›– vue-sonner é»˜è®¤çš„é¡¶éƒ¨/åº•éƒ¨å¸ƒå±€é€»è¾‘
*/
:root {
  --toaster-width: auto !important;
}

/* 1. å¼ºåˆ¶å®¹å™¨å æ»¡å…¨å±ï¼Œå¹¶ä½¿ç”¨ Flex å±…ä¸­ */
ol[data-sonner-toaster] {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important; /* å…³é”®ï¼šä¸Šä¸‹å·¦å³æ’‘æ»¡ */
  width: 100% !important;
  height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
  /* å…³é”®ï¼šæ°´å¹³å‚ç›´åŒå±…ä¸­ */
  align-items: center !important; 
  justify-content: center !important; 
  pointer-events: none !important;
  z-index: 99999 !important;
  background: transparent !important;
}

/* 2. æ¢å¤å¼¹çª—æœ¬èº«çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶å¾®è°ƒé—´è· */
li[data-sonner-toast] {
  pointer-events: auto !important;
  margin: 0 !important; /* ç§»é™¤é»˜è®¤çš„å¤–è¾¹è· */
  transform: none !important; /* é˜²æ­¢åŠ¨ç”»å¯¼è‡´çš„ä½ç§»åå·® */
}

/* 3. é’ˆå¯¹ç§»åŠ¨ç«¯çš„ä¼˜åŒ– */
@media (max-width: 640px) {
  ol[data-sonner-toaster] {
    padding: 1rem;
  }
  li[data-sonner-toast] {
    width: 100% !important;
    max-width: 320px !important;
  }
}

/* 4. å¼ºåˆ¶è¦†ç›– richColors çš„é»˜è®¤åŠé€æ˜èƒŒæ™¯ï¼Œç¡®ä¿å®Œå…¨ä¸é€æ˜ */
.my-toast-card[data-type="success"] {
  background-color: #10b981 !important; /* çº¯å®è‰²ç»¿ */
  color: white !important;
  border: none !important;
}
.my-toast-card[data-type="error"] {
  background-color: #ef4444 !important; /* çº¯å®è‰²çº¢ */
  color: white !important;
  border: none !important;
}
.my-toast-card[data-type="success"] svg,
.my-toast-card[data-type="error"] svg {
  color: white !important; /* å›¾æ ‡ç™½è‰² */
  width: 1.5rem !important;
  height: 1.5rem !important;
}
</style>
